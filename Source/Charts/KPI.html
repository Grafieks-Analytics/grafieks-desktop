<html>
    <head>
        <style>
            body {
                margin: 0;
            }
            .value {
                font-family: Arial;
                color: "#000";
                width: 100%;
                text-align: center;
            }
            .label {
                font-family: Arial;
                width: 100%;
                text-align: center;
            }

            #my_dataviz {
                margin: 0;
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
            }
        </style>

        <script src="./Data/d3DefaultConfig.js"></script>
        <script src="./Data/utils.js"></script>
        <script src="./Data/d3.v4.min.js"></script>

    </head>

    <body>
        <div id="my_dataviz"></div>

        <script>
            function drawChart(data, plotConfiguration = {}) {
                var width = window.innerWidth - 10;
                var height = window.innerHeight - 10;
                var margin = { top: 100 };

                var [value, label] = data;

                var {
                    valueFontStylings = defaultD3Config.defaultKPIStyling.value,
                    labelFontStylings = defaultD3Config.defaultKPIStyling.label,
                } = plotConfiguration;

                if (Object.keys(valueFontStylings).length) {
                    var {
                        fontSize,
                        color,
                        fontStyle,
                        fontFamily,
                        bold,
                        italic,
                        underline,
                        labelConfig = defaultD3Config.defaultlabelConfig,
                        dataValueColorKpi = defaultD3Config.fontColor,
                    } = valueFontStylings;
                    window.dataValueColorKpi = dataValueColorKpi;
                    var { labelStatus, labelFormat } = labelConfig;

                    var valueStyling = document.getElementById("valueStyling");
                    if (valueStyling) {
                        valueStyling.remove();
                    }
                    var valueLabelStyling = document.createElement("style");
                    valueLabelStyling.id = "valueStyling";
                    valueLabelStyling.innerHTML = `
                        .value {
                            font-size: ${fontSize}px;
                            font-family: ${fontFamily};
                            color: ${color};
                            ${bold ? "font-weight: 700" : ""};
                            ${italic ? "font-style: italic" : ""};
                            ${underline ? "text-decoration: underline" : ""};
                        }
                    `;
                    document.body.appendChild(valueLabelStyling);
                }

                if (Object.keys(labelFontStylings).length) {
                    var {
                        fontSize,
                        color,
                        fontStyle,
                        fontFamily,
                        bold,
                        italic,
                        underline,
                        dataLabelColorKpi = defaultD3Config.fontColor,
                    } = labelFontStylings;
                    window.dataLabelColorKpi = dataLabelColorKpi;

                    var labelStyling = document.getElementById("labelStyling");
                    if (labelStyling) {
                        labelStyling.remove();
                    }
                    labelStyling = document.createElement("style");
                    labelStyling.id = "labelStyling";
                    labelStyling.innerHTML = `
                        .label {
                            font-size: ${fontSize}px;
                            font-family: ${fontFamily};
                            color: ${color};
                            ${bold ? "font-weight: 700" : ""};
                            ${italic ? "font-style: italic" : ""};
                            ${underline ? "text-decoration: underline" : ""};
                        }
                    `;
                    document.body.appendChild(labelStyling);
                }

                d3.select("#my_dataviz").html(
                    `<div class="value text-center"></div><div class="label text-center"></div>`
                );

                // d3.select(".value").text(Math.round(value)).style("color",dataValueColorKpi);
                d3.select(".value")
                    .text(labelFormatSet(value, labelFormat))
                    .style("color", dataValueColorKpi);
                d3.select(".label")
                    .text(label)
                    .style("color", dataLabelColorKpi);
            }

            // data = [12044444.555, "Label"];
            // drawChart(data);
        </script>
    </body>
</html>
