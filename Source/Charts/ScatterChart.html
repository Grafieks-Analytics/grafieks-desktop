<!DOCTYPE html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Load d3.js -->
    <script src="./Data/d3.v4.min.js"></script>
    <script src="./Data/d3DefaultConfig.js"></script>
    <script src="Data/d3-scale-chromatic.v1.min.js"></script>
    <link rel="stylesheet" href="Data/general.css" />

    <title>Scatter Chart</title>
</head>
<body>
    <div style="text-align: center">
        <!-- Create a div where the graph will take place -->
        <div id="my_dataviz"></div>
    </div>
    <div id="tooltip"></div>

    <script>
        // Categories
        var categories = ["setosa", "versicolor", "virginica", "default"];
        //Read the data
        var data = [
            [
                ["5.1", "3.5", "1.4", "0.2", "setosa"],
                ["4.9", "3", "1.4", "0.2", "setosa"],
                ["4.7", "3.2", "1.3", "0.2", "setosa"],
                ["4.6", "3.1", "1.5", "0.2", "setosa"],
                ["5", "3.6", "1.4", "0.2", "setosa"],
                ["5.4", "3.9", "1.7", "0.4", "setosa"],
                ["4.6", "3.4", "1.4", "0.3", "setosa"],
                ["5", "3.4", "1.5", "0.2", "setosa"],
                ["4.4", "2.9", "1.4", "0.2", "setosa"],
                ["4.9", "3.1", "1.5", "0.1", "setosa"],
                ["5.4", "3.7", "1.5", "0.2", "setosa"],
                ["4.8", "3.4", "1.6", "0.2", "setosa"],
                ["4.8", "3", "1.4", "0.1", "setosa"],
                ["4.3", "3", "1.1", "0.1", "setosa"],
                ["5.8", "4", "1.2", "0.2", "setosa"],
                ["5.7", "4.4", "1.5", "0.4", "setosa"],
                ["5.4", "3.9", "1.3", "0.4", "setosa"],
                ["5.1", "3.5", "1.4", "0.3", "setosa"],
                ["5.7", "3.8", "1.7", "0.3", "setosa"],
                ["5.1", "3.8", "1.5", "0.3", "setosa"],
                ["5.4", "3.4", "1.7", "0.2", "setosa"],
                ["5.1", "3.7", "1.5", "0.4", "setosa"],
                ["4.6", "3.6", "1", "0.2", "setosa"],
                ["5.1", "3.3", "1.7", "0.5", "setosa"],
                ["4.8", "3.4", "1.9", "0.2", "setosa"],
                ["5", "3", "1.6", "0.2", "setosa"],
                ["5", "3.4", "1.6", "0.4", "setosa"],
                ["5.2", "3.5", "1.5", "0.2", "setosa"],
                ["5.2", "3.4", "1.4", "0.2", "setosa"],
                ["4.7", "3.2", "1.6", "0.2", "setosa"],
                ["4.8", "3.1", "1.6", "0.2", "setosa"],
                ["5.4", "3.4", "1.5", "0.4", "setosa"],
                ["5.2", "4.1", "1.5", "0.1", "setosa"],
                ["5.5", "4.2", "1.4", "0.2", "setosa"],
                ["4.9", "3.1", "1.5", "0.2", "setosa"],
                ["5", "3.2", "1.2", "0.2", "setosa"],
                ["5.5", "3.5", "1.3", "0.2", "setosa"],
                ["4.9", "3.6", "1.4", "0.1", "setosa"],
                ["4.4", "3", "1.3", "0.2", "setosa"],
                ["5.1", "3.4", "1.5", "0.2", "setosa"],
                ["5", "3.5", "1.3", "0.3", "setosa"],
                ["4.5", "2.3", "1.3", "0.3", "setosa"],
                ["4.4", "3.2", "1.3", "0.2", "setosa"],
                ["5", "3.5", "1.6", "0.6", "setosa"],
                ["5.1", "3.8", "1.9", "0.4", "setosa"],
                ["4.8", "3", "1.4", "0.3", "setosa"],
                ["5.1", "3.8", "1.6", "0.2", "setosa"],
                ["4.6", "3.2", "1.4", "0.2", "setosa"],
                ["5.3", "3.7", "1.5", "0.2", "setosa"],
                ["5", "3.3", "1.4", "0.2", "setosa"],
                ["7", "3.2", "4.7", "1.4", "versicolor"],
                ["6.4", "3.2", "4.5", "1.5", "versicolor"],
                ["6.9", "3.1", "4.9", "1.5", "versicolor"],
                ["5.5", "2.3", "4", "1.3", "versicolor"],
                ["6.5", "2.8", "4.6", "1.5", "versicolor"],
                ["5.7", "2.8", "4.5", "1.3", "versicolor"],
                ["6.3", "3.3", "4.7", "1.6", "versicolor"],
                ["4.9", "2.4", "3.3", "1", "versicolor"],
                ["6.6", "2.9", "4.6", "1.3", "versicolor"],
                ["5.2", "2.7", "3.9", "1.4", "versicolor"],
                ["5", "2", "3.5", "1", "versicolor"],
                ["5.9", "3", "4.2", "1.5", "versicolor"],
                ["6", "2.2", "4", "1", "versicolor"],
                ["6.1", "2.9", "4.7", "1.4", "versicolor"],
                ["5.6", "2.9", "3.6", "1.3", "versicolor"],
                ["6.7", "3.1", "4.4", "1.4", "versicolor"],
                ["5.6", "3", "4.5", "1.5", "versicolor"],
                ["5.8", "2.7", "4.1", "1", "versicolor"],
                ["6.2", "2.2", "4.5", "1.5", "versicolor"],
                ["5.6", "2.5", "3.9", "1.1", "versicolor"],
                ["5.9", "3.2", "4.8", "1.8", "versicolor"],
                ["6.1", "2.8", "4", "1.3", "versicolor"],
                ["6.3", "2.5", "4.9", "1.5", "versicolor"],
                ["6.1", "2.8", "4.7", "1.2", "versicolor"],
                ["6.4", "2.9", "4.3", "1.3", "versicolor"],
                ["6.6", "3", "4.4", "1.4", "versicolor"],
                ["6.8", "2.8", "4.8", "1.4", "versicolor"],
                ["6.7", "3", "5", "1.7", "versicolor"],
                ["6", "2.9", "4.5", "1.5", "versicolor"],
                ["5.7", "2.6", "3.5", "1", "versicolor"],
                ["5.5", "2.4", "3.8", "1.1", "versicolor"],
                ["5.5", "2.4", "3.7", "1", "versicolor"],
                ["5.8", "2.7", "3.9", "1.2", "versicolor"],
                ["6", "2.7", "5.1", "1.6", "versicolor"],
                ["5.4", "3", "4.5", "1.5", "versicolor"],
                ["6", "3.4", "4.5", "1.6", "versicolor"],
                ["6.7", "3.1", "4.7", "1.5", "versicolor"],
                ["6.3", "2.3", "4.4", "1.3", "versicolor"],
                ["5.6", "3", "4.1", "1.3", "versicolor"],
                ["5.5", "2.5", "4", "1.3", "versicolor"],
                ["5.5", "2.6", "4.4", "1.2", "versicolor"],
                ["6.1", "3", "4.6", "1.4", "versicolor"],
                ["5.8", "2.6", "4", "1.2", "versicolor"],
                ["5", "2.3", "3.3", "1", "versicolor"],
                ["5.6", "2.7", "4.2", "1.3", "versicolor"],
                ["5.7", "3", "4.2", "1.2", "versicolor"],
                ["5.7", "2.9", "4.2", "1.3", "versicolor"],
                ["6.2", "2.9", "4.3", "1.3", "versicolor"],
                ["5.1", "2.5", "3", "1.1", "versicolor"],
                ["5.7", "2.8", "4.1", "1.3", "versicolor"],
                ["6.3", "3.3", "6", "2.5", "virginica"],
                ["5.8", "2.7", "5.1", "1.9", "virginica"],
                ["7.1", "3", "5.9", "2.1", "virginica"],
                ["6.3", "2.9", "5.6", "1.8", "virginica"],
                ["6.5", "3", "5.8", "2.2", "virginica"],
                ["7.6", "3", "6.6", "2.1", "virginica"],
                ["4.9", "2.5", "4.5", "1.7", "virginica"],
                ["7.3", "2.9", "6.3", "1.8", "virginica"],
                ["6.7", "2.5", "5.8", "1.8", "virginica"],
                ["7.2", "3.6", "6.1", "2.5", "virginica"],
                ["6.5", "3.2", "5.1", "2", "virginica"],
                ["6.4", "2.7", "5.3", "1.9", "virginica"],
                ["6.8", "3", "5.5", "2.1", "virginica"],
                ["5.7", "2.5", "5", "2", "virginica"],
                ["5.8", "2.8", "5.1", "2.4", "virginica"],
                ["6.4", "3.2", "5.3", "2.3", "virginica"],
                ["6.5", "3", "5.5", "1.8", "virginica"],
                ["7.7", "3.8", "6.7", "2.2", "virginica"],
                ["7.7", "2.6", "6.9", "2.3", "virginica"],
                ["6", "2.2", "5", "1.5", "virginica"],
                ["6.9", "3.2", "5.7", "2.3", "virginica"],
                ["5.6", "2.8", "4.9", "2", "virginica"],
                ["7.7", "2.8", "6.7", "2", "virginica"],
                ["6.3", "2.7", "4.9", "1.8", "virginica"],
                ["6.7", "3.3", "5.7", "2.1", "virginica"],
                ["7.2", "3.2", "6", "1.8", "virginica"],
                ["6.2", "2.8", "4.8", "1.8", "virginica"],
                ["6.1", "3", "4.9", "1.8", "virginica"],
                ["6.4", "2.8", "5.6", "2.1", "virginica"],
                ["7.2", "3", "5.8", "1.6", "virginica"],
                ["7.4", "2.8", "6.1", "1.9", "virginica"],
                ["7.9", "3.8", "6.4", "2", "virginica"],
                ["6.4", "2.8", "5.6", "2.2", "virginica"],
                ["6.3", "2.8", "5.1", "1.5", "virginica"],
                ["6.1", "2.6", "5.6", "1.4", "virginica"],
                ["7.7", "3", "6.1", "2.3", "virginica"],
                ["6.3", "3.4", "5.6", "2.4", "virginica"],
                ["6.4", "3.1", "5.5", "1.8", "virginica"],
                ["6", "3", "4.8", "1.8", "virginica"],
                ["6.9", "3.1", "5.4", "2.1", "virginica"],
                ["6.7", "3.1", "5.6", "2.4", "virginica"],
                ["6.9", "3.1", "5.1", "2.3", "virginica"],
                ["5.8", "2.7", "5.1", "1.9", "virginica"],
                ["6.8", "3.2", "5.9", "2.3", "virginica"],
                ["6.7", "3.3", "5.7", "2.5", "virginica"],
                ["6.7", "3", "5.2", "2.3", "virginica"],
                ["6.3", "2.5", "5", "1.9", "virginica"],
                ["6.5", "3", "5.2", "2", "virginica"],
                ["6.2", "3.4", "5.4", "2.3", "virginica"],
                ["5.9", "3", "5.1", "1.8", "virginica"],
            ],
            [
                "Sepal_Length",
                "Sepal_Width",
                "Petal_Length",
                "Petal_Width",
                "Species",
            ],
        ];

        function drawChart(data, plottingConfiguration = {}) {
            d3.selectAll("#my_dataviz").html("");

            let {
                d3colorPalette,
                paddingInner,
                legendConfig,
                innerRadius,
            } = plottingConfiguration;
            if (!d3colorPalette) {
                d3colorPalette = defaultD3Config.d3ColorPalette;
            }
            const d3Colors = d3[d3colorPalette];
            // set the dimensions and margins of the graph
            var margin = { top: 30, right: 30, bottom: 70, left: 60 },
                width = window.innerWidth - margin.left - margin.right - 20,
                height = window.innerHeight - margin.top - margin.bottom - 30;

            if (!legendConfig) {
                legendConfig = { legendStatus: false };
            }

            if (!innerRadius) {
                innerRadius = defaultD3Config.innerRadius;
            }

            // // set the dimensions and margins of the graph
            // var margin = { top: 10, right: 30, bottom: 30, left: 60 },
            //     width = 1300 - margin.left - margin.right,
            //     height = 600 - margin.top - margin.bottom;

            // append the svg object to the body of the page
            var svg = d3
                .select("#my_dataviz")
                .append("svg")
                .attr("width", width + margin.left + margin.right)
                .attr("height", height + margin.top + margin.bottom)
                .append("g")
                .attr(
                    "transform",
                    "translate(" + margin.left + "," + margin.top + ")"
                );

            // Add X axis
            var x = d3.scaleLinear().domain([4, 8]).range([0, width]);
            svg.append("g")
                .attr("transform", "translate(0," + height + ")")
                .call(d3.axisBottom(x).tickSizeOuter(0))
                .attr("class", "x-axis");

            // svg.append("g")
            //     .attr("class", "grid")
            //     .attr("transform", "translate(0," + height + ")")
            //     .style("stroke-width", "1")
            //     .call(make_x_gridlines().tickSize(-height).tickFormat(""));

            // Add Y axis
            var y = d3.scaleLinear().domain([0, 9]).range([height, 0]);
            svg.append("g")
                .call(d3.axisLeft(y).tickSizeOuter(0))
                .attr("class", "y-axis");

            svg.append("g")
                .attr("class", "grid")
                .style("stroke-width", "1")
                .call(make_y_gridlines().tickSize(-width).tickFormat(""));

            // Color scale: give me a specie name, I return a color
            var color = d3.scaleOrdinal().domain(categories).range(d3Colors);

            var dataValues = data[0];
            // Add dots
            svg.append("g")
                .selectAll("dot")
                .data(dataValues)
                .enter()
                .append("circle")
                .attr("cx", function (d) {
                    return x(d[0]);
                })
                .attr("cy", function (d) {
                    return y(d[2]);
                })
                .attr("r", 5)
                .style("fill", function (d) {
                    return color(d[4]);
                })
                .attr("class", function (d, i) {
                    return "scatter" + i + d[4];
                })
                .on("mouseover mousemove", function (d, i) {
                    var x_pos = d3.mouse(this)[0] - 20;
                    var y_pos = d3.mouse(this)[1];

                    d3.select("#tooltip")
                        .style("left", x_pos + "px")
                        .style("top", y_pos + "px")
                        .style("display", "block")
                        .html(
                            "Sepal Width: " +
                                d[1] +
                                "<br/> Sepal Length: " +
                                d[0]
                        );
                    d3.select(".scatter" + i + d.Species);

                    d3.select(this).attr("r", 10);
                })
                .on("mouseout", function (d, i) {
                    d3.select("#tooltip").style("display", "none");
                    d3.select(".scatter" + i + d.Species);

                    d3.select(this).attr("r", 5);
                });

            // Generate Grid starts

            function make_x_gridlines() {
                return d3.axisBottom(x).ticks(8);
            }
            function make_y_gridlines() {
                return d3.axisLeft(y).ticks(5);
            }
        }

        drawChart(data);

        // Generate Grid ends
        // });
    </script>
</body>
